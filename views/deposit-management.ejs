<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³´ì¦ê¸ˆ ìš´ìš© ê³„ì‚°ê¸° - ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&family=Archivo:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/calculator.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">ë¶€</div>
            <a href="/" style="text-decoration: none; color: inherit;">ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding-top: 32px; padding-bottom: 80px;">
        <a href="/rent" class="back-button">
            â† ì§‘ì„ ë¹Œë ¤ì£¼ë ¤ê³  í•´ìš”
        </a>

        <div class="calculator-header">
            <div class="calculator-icon-large">ğŸ¦</div>
            <h1 class="calculator-title">ë³´ì¦ê¸ˆ ìš´ìš© ê³„ì‚°ê¸°</h1>
            <p class="calculator-subtitle">ë°›ì€ ë³´ì¦ê¸ˆì˜ ì˜ˆì¹˜ ë° ìš´ìš© ìˆ˜ìµì„ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>

        <!-- ë³´ì¦ê¸ˆ ìš´ìš© ì•ˆë‚´ -->
        <div class="info-box">
            <div class="info-title">
                ğŸ’¡ ë³´ì¦ê¸ˆ ìš´ìš©ì´ë€?
            </div>
            <div class="info-content">
                ì„ì°¨ì¸ì—ê²Œ ë°›ì€ ë³´ì¦ê¸ˆì„ ì€í–‰ ì˜ˆê¸ˆ, ì ê¸ˆ ë“±ìœ¼ë¡œ ìš´ìš©í•˜ì—¬ ìˆ˜ìµì„ ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤.
                <br><br>
                â€¢ <strong>ë²•ì  ì˜ë¬´</strong>: ì„ëŒ€ë³´ì¦ê¸ˆ ë°˜í™˜ë³´ì¦ ê°€ì… ê¶Œì¥<br>
                â€¢ <strong>ì•ˆì „í•œ ìš´ìš©</strong>: ì˜ˆê¸ˆìë³´í˜¸ í•œë„(5ì²œë§Œì›) ê³ ë ¤<br>
                â€¢ <strong>ìˆ˜ìµ ê·¹ëŒ€í™”</strong>: ê³ ê¸ˆë¦¬ ìƒí’ˆ, CMA, MMF í™œìš©<br>
                â€¢ <strong>ì„¸ê¸ˆ</strong>: ì´ìì†Œë“ì„¸ 15.4% ì›ì²œì§•ìˆ˜<br>
                <br>
                ë³´ì¦ê¸ˆì„ ì•ˆì „í•˜ê²Œ ìš´ìš©í•˜ë©´ì„œ ì¶”ê°€ ìˆ˜ìµì„ ì°½ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
        </div>

        <!-- ê³„ì‚° ì…ë ¥ í¼ -->
        <div class="calc-section">
            <h2 class="calc-section-title">ë³´ì¦ê¸ˆ ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ë°›ì€ ë³´ì¦ê¸ˆ</label>
                <div class="input-wrapper">
                    <input type="text" id="depositAmount" class="input-field" placeholder="ì˜ˆ: 100000000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì„ì°¨ì¸ì—ê²Œ ë°›ì€ ë³´ì¦ê¸ˆ ì´ì•¡</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì„ëŒ€ ê¸°ê°„</label>
                <div class="input-wrapper">
                    <input type="text" id="rentalPeriod" class="input-field" placeholder="24" inputmode="numeric" value="24">
                    <span class="input-suffix">ê°œì›”</span>
                </div>
                <div class="input-helper">ê³„ì•½ ê¸°ê°„ (ì¼ë°˜ì ìœ¼ë¡œ 24ê°œì›”)</div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ìš´ìš© ë°©ì‹</h2>
            
            <div class="input-group">
                <label class="input-label">ìš´ìš© ìƒí’ˆ</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="productType" value="savings" checked>
                        <span class="radio-label">ì˜ˆê¸ˆ (ì •ê¸°ì˜ˆê¸ˆ)</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="productType" value="installment">
                        <span class="radio-label">ì ê¸ˆ (ì •ê¸°ì ê¸ˆ)</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="productType" value="cma">
                        <span class="radio-label">CMA/MMF</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="productType" value="custom">
                        <span class="radio-label">ì§ì ‘ ì…ë ¥</span>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ì˜ˆìƒ ì´ììœ¨ (ì—°)</label>
                <div class="input-wrapper">
                    <input type="text" id="interestRate" class="input-field" placeholder="3.5" inputmode="decimal" value="3.5">
                    <span class="input-suffix">%</span>
                </div>
                <div class="input-helper">í˜„ì¬ ì‹œì¤‘ ê¸ˆë¦¬ ì°¸ê³  (2024ë…„ ê¸°ì¤€ 3~4%)</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì´ì ê³„ì‚° ë°©ì‹</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="interestType" value="simple" checked>
                        <span class="radio-label">ë‹¨ë¦¬</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="interestType" value="compound">
                        <span class="radio-label">ë³µë¦¬</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ì¶”ê°€ ì˜µì…˜</h2>
            
            <div class="input-group">
                <label class="input-label">ì„ëŒ€ë³´ì¦ë³´í—˜ ê°€ì…</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="insurance" value="no" checked>
                        <span class="radio-label">ë¯¸ê°€ì…</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="insurance" value="yes">
                        <span class="radio-label">ê°€ì…</span>
                    </label>
                </div>
            </div>

            <div class="input-group" id="insuranceRateSection" style="display: none;">
                <label class="input-label">ë³´ì¦ë³´í—˜ë£Œìœ¨</label>
                <div class="input-wrapper">
                    <input type="text" id="insuranceRate" class="input-field" placeholder="0.128" inputmode="decimal" value="0.128">
                    <span class="input-suffix">%</span>
                </div>
                <div class="input-helper">ì¼ë°˜ì ìœ¼ë¡œ ì—° 0.128% ìˆ˜ì¤€</div>
            </div>

            <button class="calc-button" id="calculateButton">
                ë³´ì¦ê¸ˆ ìš´ìš© ìˆ˜ìµ ê³„ì‚°í•˜ê¸°
            </button>
        </div>

        <!-- ê²°ê³¼ ì˜ì—­ -->
        <div id="resultSection" class="result-section" style="display: none;">
            <h2 class="result-title">ğŸ¦ ê³„ì‚° ê²°ê³¼</h2>
            
            <div class="result-card total">
                <div class="result-label">ì´ ìˆœìˆ˜ìµ (ì„¸í›„)</div>
                <div class="result-value" id="netProfit">0ì›</div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ë³´ì¦ê¸ˆ ìš´ìš© ì •ë³´</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ë³´ì¦ê¸ˆ</span>
                    <span class="breakdown-value" id="displayDepositAmount">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ìš´ìš© ê¸°ê°„</span>
                    <span class="breakdown-value" id="displayRentalPeriod">0ê°œì›”</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ìš´ìš© ìƒí’ˆ</span>
                    <span class="breakdown-value" id="displayProductType">-</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì´ììœ¨ (ì—°)</span>
                    <span class="breakdown-value" id="displayInterestRate">0%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì´ì ë°©ì‹</span>
                    <span class="breakdown-value" id="displayInterestType">-</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ìˆ˜ìµ ê³„ì‚°</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì´ ì´ì ìˆ˜ìµ (ì„¸ì „)</span>
                    <span class="breakdown-value" id="totalInterest">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì´ìì†Œë“ì„¸ (15.4%)</span>
                    <span class="breakdown-value" id="interestTax">0ì›</span>
                </div>
                <div class="breakdown-item" style="background: rgba(0, 217, 181, 0.1); padding: 12px; border-radius: 8px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 700; color: var(--secondary);">ì´ì ìˆœìˆ˜ìµ (ì„¸í›„)</span>
                    <span class="breakdown-value" style="font-weight: 700; color: var(--secondary);" id="netInterest">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown" id="insuranceSection" style="display: none;">
                <h3 class="breakdown-title">ì„ëŒ€ë³´ì¦ë³´í—˜ë£Œ</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ë³´ì¦ë³´í—˜ë£Œ</span>
                    <span class="breakdown-value" id="insuranceFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ë³´í—˜ë£Œìœ¨ (ì—°)</span>
                    <span class="breakdown-value" id="displayInsuranceRate">0%</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ìµœì¢… ìˆ˜ìµ</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì´ì ìˆœìˆ˜ìµ</span>
                    <span class="breakdown-value" id="finalNetInterest">0ì›</span>
                </div>
                <div class="breakdown-item" id="insuranceCostItem" style="display: none;">
                    <span class="breakdown-label">ë³´ì¦ë³´í—˜ë£Œ (-)</span>
                    <span class="breakdown-value" id="displayInsuranceFee">0ì›</span>
                </div>
                <div class="breakdown-item" style="background: rgba(0, 102, 255, 0.05); padding: 12px; border-radius: 8px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 700;">ì´ ìˆœìˆ˜ìµ</span>
                    <span class="breakdown-value" style="font-weight: 700; color: var(--primary);" id="displayNetProfit">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ì›” í™˜ì‚° ìˆ˜ìµ</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì›”í‰ê·  ìˆ˜ìµ</span>
                    <span class="breakdown-value" id="monthlyProfit">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì‹¤ì§ˆ ì›”ìˆ˜ìµë¥ </span>
                    <span class="breakdown-value" id="monthlyYield">0%</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ìƒí’ˆë³„ ë¹„êµ (ê°™ì€ ì¡°ê±´)</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì •ê¸°ì˜ˆê¸ˆ (3.5%)</span>
                    <span class="breakdown-value" id="savingsComparison">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">CMA (3.0%)</span>
                    <span class="breakdown-value" id="cmaComparison">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">MMF (2.8%)</span>
                    <span class="breakdown-value" id="mmfComparison">0ì›</span>
                </div>
            </div>

            <div class="result-info">
                <div class="info-icon">â„¹ï¸</div>
                <div class="info-text" id="resultInfo"></div>
            </div>

            <div class="result-info" style="background: rgba(255, 87, 51, 0.05); border-color: rgba(255, 87, 51, 0.2);">
                <div class="info-icon">âš ï¸</div>
                <div class="info-text">
                    <strong>ë³´ì¦ê¸ˆ ìš´ìš© ì£¼ì˜ì‚¬í•­</strong><br>
                    â€¢ ì˜ˆê¸ˆìë³´í˜¸ í•œë„ 5ì²œë§Œì› ì´ˆê³¼ë¶„ì€ ì—¬ëŸ¬ ì€í–‰ ë¶„ì‚°<br>
                    â€¢ ì„ëŒ€ë³´ì¦ë³´í—˜ ê°€ì… ì‹œ ì„¸ì…ì ì•ˆì‹¬<br>
                    â€¢ ê³„ì•½ ë§Œë£Œì¼ì— ë§ì¶° ë§Œê¸° ì„¤ì •<br>
                    â€¢ ì¤‘ë„ í•´ì§€ ë¶ˆì´ìµ ê³ ë ¤í•˜ì—¬ ìœ ë™ì„± í™•ë³´<br>
                    â€¢ ê³ ìœ„í—˜ íˆ¬ì ì ˆëŒ€ ê¸ˆì§€ (ì›ê¸ˆ ë³´ì¡´ í•„ìˆ˜)
                </div>
            </div>

            <div class="result-info" style="background: rgba(0, 217, 181, 0.05); border-color: rgba(0, 217, 181, 0.2);">
                <div class="info-icon">ğŸ’¡</div>
                <div class="info-text">
                    <strong>ë³´ì¦ê¸ˆ ìš´ìš© íŒ</strong><br>
                    â€¢ 5ì²œë§Œì› ì´ˆê³¼ ì‹œ ë³µìˆ˜ ì€í–‰ í™œìš©<br>
                    â€¢ íŠ¹íŒ ê¸ˆë¦¬ ìƒí’ˆ ì ê·¹ í™œìš©<br>
                    â€¢ CMA/MMFëŠ” ì–¸ì œë“  ì°¾ì„ ìˆ˜ ìˆì–´ ìœ ë¦¬<br>
                    â€¢ ì¬ê³„ì•½ ê°€ëŠ¥ì„± ê³ ë ¤í•˜ì—¬ ìë™ì—°ì¥ ì„¤ì •<br>
                    â€¢ ì„¸ê¸ˆìš°ëŒ€ ìƒí’ˆ í™œìš© (ì¡°ê±´ ì¶©ì¡± ì‹œ)
                </div>
            </div>

            <div class="result-actions">
                <button class="action-button secondary" id="resetButton">
                    ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°
                </button>
                <button class="action-button primary" id="shareButton">
                    ê²°ê³¼ ê³µìœ í•˜ê¸°
                </button>
            </div>
        </div>
    </main>

    <script>
        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            const calculateButton = document.getElementById('calculateButton');
            if (calculateButton) {
                calculateButton.addEventListener('click', calculateDepositManagement);
            }

            const resetButton = document.getElementById('resetButton');
            if (resetButton) {
                resetButton.addEventListener('click', resetCalculator);
            }

            const shareButton = document.getElementById('shareButton');
            if (shareButton) {
                shareButton.addEventListener('click', shareResult);
            }

            // ìˆ«ì ì…ë ¥ í•„ë“œ
            ['depositAmount', 'rentalPeriod', 'interestRate', 'insuranceRate'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/[^0-9.]/g, '');
                        e.target.value = value;
                    });
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') calculateDepositManagement();
                    });
                }
            });

            // ë³´í—˜ ê°€ì… ì—¬ë¶€ì— ë”°ë¼ ë³´í—˜ë£Œìœ¨ ì…ë ¥ í‘œì‹œ
            const insuranceInputs = document.querySelectorAll('input[name="insurance"]');
            insuranceInputs.forEach(input => {
                input.addEventListener('change', function() {
                    const insuranceRateSection = document.getElementById('insuranceRateSection');
                    if (this.value === 'yes') {
                        insuranceRateSection.style.display = 'block';
                    } else {
                        insuranceRateSection.style.display = 'none';
                    }
                });
            });

            // ìš´ìš© ìƒí’ˆì— ë”°ë¼ ì´ììœ¨ ìë™ ì„¤ì •
            const productTypeInputs = document.querySelectorAll('input[name="productType"]');
            productTypeInputs.forEach(input => {
                input.addEventListener('change', function() {
                    const interestRateInput = document.getElementById('interestRate');
                    if (this.value === 'savings') {
                        interestRateInput.value = '3.5';
                    } else if (this.value === 'installment') {
                        interestRateInput.value = '3.0';
                    } else if (this.value === 'cma') {
                        interestRateInput.value = '3.0';
                    }
                });
            });
        });

        function formatNumber(num) {
            return new Intl.NumberFormat('ko-KR').format(Math.floor(num));
        }

        function formatCurrency(num) {
            return formatNumber(num) + 'ì›';
        }

        function formatKoreanCurrency(num) {
            const billion = Math.floor(num / 100000000);
            const tenThousand = Math.floor((num % 100000000) / 10000);
            const remainder = num % 10000;
            
            let result = '';
            if (billion > 0) result += billion + 'ì–µ ';
            if (tenThousand > 0) result += formatNumber(tenThousand) + 'ë§Œ ';
            if (remainder > 0 && billion === 0) result += formatNumber(remainder);
            
            return result.trim() + 'ì›';
        }

        function calculateInterest(principal, rate, months, isCompound) {
            const annualRate = rate / 100;
            const years = months / 12;
            
            if (isCompound) {
                // ë³µë¦¬: P Ã— (1 + r)^t - P
                return principal * Math.pow(1 + annualRate, years) - principal;
            } else {
                // ë‹¨ë¦¬: P Ã— r Ã— t
                return principal * annualRate * years;
            }
        }

        function calculateDepositManagement() {
            const depositAmount = parseInt(document.getElementById('depositAmount').value) || 0;
            const rentalPeriod = parseInt(document.getElementById('rentalPeriod').value) || 24;
            const productType = document.querySelector('input[name="productType"]:checked').value;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 3.5;
            const interestType = document.querySelector('input[name="interestType"]:checked').value;
            const insurance = document.querySelector('input[name="insurance"]:checked').value;
            const insuranceRate = parseFloat(document.getElementById('insuranceRate').value) || 0.128;

            if (depositAmount === 0) {
                alert('ë³´ì¦ê¸ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ìƒí’ˆëª…
            let productName = '';
            if (productType === 'savings') productName = 'ì •ê¸°ì˜ˆê¸ˆ';
            else if (productType === 'installment') productName = 'ì •ê¸°ì ê¸ˆ';
            else if (productType === 'cma') productName = 'CMA/MMF';
            else productName = 'ì‚¬ìš©ì ì§€ì •';

            // ì´ì ê³„ì‚° ë°©ì‹
            const isCompound = interestType === 'compound';
            const interestTypeName = isCompound ? 'ë³µë¦¬' : 'ë‹¨ë¦¬';

            // ì´ ì´ì ìˆ˜ìµ (ì„¸ì „)
            const totalInterest = calculateInterest(depositAmount, interestRate, rentalPeriod, isCompound);

            // ì´ìì†Œë“ì„¸ (15.4%)
            const interestTax = totalInterest * 0.154;

            // ì´ì ìˆœìˆ˜ìµ (ì„¸í›„)
            const netInterest = totalInterest - interestTax;

            // ì„ëŒ€ë³´ì¦ë³´í—˜ë£Œ
            let insuranceFee = 0;
            if (insurance === 'yes') {
                insuranceFee = depositAmount * (insuranceRate / 100) * (rentalPeriod / 12);
            }

            // ì´ ìˆœìˆ˜ìµ
            const netProfit = netInterest - insuranceFee;

            // ì›”í‰ê·  ìˆ˜ìµ
            const monthlyProfit = netProfit / rentalPeriod;

            // ì‹¤ì§ˆ ì›”ìˆ˜ìµë¥ 
            const monthlyYield = (monthlyProfit / depositAmount) * 100;

            // ìƒí’ˆë³„ ë¹„êµ (ë‹¨ë¦¬, ì„¸í›„)
            const savingsInterest = calculateInterest(depositAmount, 3.5, rentalPeriod, false) * 0.846;
            const cmaInterest = calculateInterest(depositAmount, 3.0, rentalPeriod, false) * 0.846;
            const mmfInterest = calculateInterest(depositAmount, 2.8, rentalPeriod, false) * 0.846;

            // ê²°ê³¼ ë©”ì‹œì§€
            let resultInfo = `ë³´ì¦ê¸ˆ ${formatKoreanCurrency(depositAmount)}ì„ ${rentalPeriod}ê°œì›”ê°„ ${productName} (${interestRate}%, ${interestTypeName})ë¡œ ìš´ìš© ì‹œ `;
            resultInfo += `ì„¸í›„ ${formatKoreanCurrency(netProfit)}ì˜ ìˆœìˆ˜ìµì´ ë°œìƒí•©ë‹ˆë‹¤. `;
            if (monthlyYield >= 0.25) {
                resultInfo += `ì›” í™˜ì‚° ${formatKoreanCurrency(monthlyProfit)}ë¡œ ì–‘í˜¸í•œ ìˆ˜ìµë¥ ì…ë‹ˆë‹¤.`;
            } else {
                resultInfo += `ì›” í™˜ì‚° ${formatKoreanCurrency(monthlyProfit)}ì…ë‹ˆë‹¤.`;
            }

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('netProfit').textContent = formatKoreanCurrency(netProfit);
            
            document.getElementById('displayDepositAmount').textContent = formatCurrency(depositAmount);
            document.getElementById('displayRentalPeriod').textContent = rentalPeriod + 'ê°œì›”';
            document.getElementById('displayProductType').textContent = productName;
            document.getElementById('displayInterestRate').textContent = interestRate + '%';
            document.getElementById('displayInterestType').textContent = interestTypeName;
            
            document.getElementById('totalInterest').textContent = formatCurrency(totalInterest);
            document.getElementById('interestTax').textContent = formatCurrency(interestTax);
            document.getElementById('netInterest').textContent = formatCurrency(netInterest);
            
            if (insurance === 'yes') {
                document.getElementById('insuranceSection').style.display = 'block';
                document.getElementById('insuranceFee').textContent = formatCurrency(insuranceFee);
                document.getElementById('displayInsuranceRate').textContent = insuranceRate + '%';
                document.getElementById('insuranceCostItem').style.display = 'flex';
                document.getElementById('displayInsuranceFee').textContent = formatCurrency(insuranceFee);
            } else {
                document.getElementById('insuranceSection').style.display = 'none';
                document.getElementById('insuranceCostItem').style.display = 'none';
            }
            
            document.getElementById('finalNetInterest').textContent = formatCurrency(netInterest);
            document.getElementById('displayNetProfit').textContent = formatCurrency(netProfit);
            
            document.getElementById('monthlyProfit').textContent = formatCurrency(monthlyProfit);
            document.getElementById('monthlyYield').textContent = monthlyYield.toFixed(3) + '%';
            
            document.getElementById('savingsComparison').textContent = formatCurrency(savingsInterest);
            document.getElementById('cmaComparison').textContent = formatCurrency(cmaInterest);
            document.getElementById('mmfComparison').textContent = formatCurrency(mmfInterest);
            
            document.getElementById('resultInfo').textContent = resultInfo;

            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function resetCalculator() {
            document.getElementById('depositAmount').value = '';
            document.getElementById('rentalPeriod').value = '24';
            document.getElementById('interestRate').value = '3.5';
            document.getElementById('insuranceRate').value = '0.128';
            document.querySelector('input[name="productType"][value="savings"]').checked = true;
            document.querySelector('input[name="interestType"][value="simple"]').checked = true;
            document.querySelector('input[name="insurance"][value="no"]').checked = true;
            document.getElementById('insuranceRateSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function shareResult() {
            const netProfit = document.getElementById('netProfit').textContent;
            const depositAmount = document.getElementById('displayDepositAmount').textContent;
            const text = `ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°ì—ì„œ ë³´ì¦ê¸ˆ ìš´ìš© ìˆ˜ìµì„ ê³„ì‚°í–ˆì–´ìš”!\në³´ì¦ê¸ˆ: ${depositAmount}\nì´ ìˆœìˆ˜ìµ: ${netProfit}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ë³´ì¦ê¸ˆ ìš´ìš© ê³„ì‚° ê²°ê³¼',
                    text: text
                });
            } else {
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                navigator.clipboard.writeText(text);
            }
        }
    </script>
</body>
</html>
