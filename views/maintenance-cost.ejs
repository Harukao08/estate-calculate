<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ë¹„ ë° ìœ ì§€ë¹„ ê³„ì‚°ê¸° - ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&family=Archivo:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/calculator.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">ë¶€</div>
            <a href="/" style="text-decoration: none; color: inherit;">ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding-top: 32px; padding-bottom: 80px;">
        <a href="/hold" class="back-button">
            â† ì§‘ì„ ê°€ì§€ê³  ìˆì–´ìš”
        </a>

        <div class="calculator-header">
            <div class="calculator-icon-large">ğŸ”§</div>
            <h1 class="calculator-title">ê´€ë¦¬ë¹„ ë° ìœ ì§€ë¹„ ê³„ì‚°ê¸°</h1>
            <p class="calculator-subtitle">ì£¼íƒ ìœ ì§€ì— í•„ìš”í•œ ì›”ê°„ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>

        <!-- ê´€ë¦¬ë¹„ ì•ˆë‚´ -->
        <div class="info-box">
            <div class="info-title">
                ğŸ’¡ ì£¼íƒ ìœ ì§€ë¹„ë€?
            </div>
            <div class="info-content">
                ì£¼íƒì„ ì†Œìœ í•˜ê³  ê±°ì£¼í•˜ë©´ì„œ ë§¤ì›” ë°œìƒí•˜ëŠ” ê³ ì • ë¹„ìš©ì…ë‹ˆë‹¤.
                <br><br>
                â€¢ <strong>ì•„íŒŒíŠ¸</strong>: ê´€ë¦¬ë¹„, ê³µê³¼ê¸ˆ, ìˆ˜ì„ ì¶©ë‹¹ê¸ˆ ë“±<br>
                â€¢ <strong>ë‹¨ë…/ë¹Œë¼</strong>: ê³µê³¼ê¸ˆ, ìˆ˜ì„ ë¹„, ë³´í—˜ë£Œ ë“±<br>
                â€¢ <strong>ì„¸ê¸ˆ</strong>: ì¬ì‚°ì„¸ ì›”í•  ê³„ì‚°
            </div>
        </div>

        <!-- ê³„ì‚° ì…ë ¥ í¼ -->
        <div class="calc-section">
            <h2 class="calc-section-title">ì£¼íƒ ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ì£¼íƒ ìœ í˜•</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="houseType" value="apartment" checked>
                        <span class="radio-label">ì•„íŒŒíŠ¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="houseType" value="villa">
                        <span class="radio-label">ë¹Œë¼/ì—°ë¦½</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="houseType" value="house">
                        <span class="radio-label">ë‹¨ë…ì£¼íƒ</span>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ì£¼íƒ ë©´ì  (ì „ìš©ë©´ì )</label>
                <div class="input-wrapper">
                    <input type="text" id="area" class="input-field" placeholder="ì˜ˆ: 84" inputmode="decimal">
                    <span class="input-suffix">ã¡</span>
                </div>
                <div class="input-helper">ì „ìš©ë©´ì  ê¸°ì¤€ (1í‰ â‰ˆ 3.3ã¡)</div>
            </div>

            <div class="input-group">
                <label class="input-label">ê±°ì£¼ ì¸ì›</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="residents" value="1">
                        <span class="radio-label">1ì¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="residents" value="2" checked>
                        <span class="radio-label">2ì¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="residents" value="3">
                        <span class="radio-label">3ì¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="residents" value="4">
                        <span class="radio-label">4ì¸ ì´ìƒ</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="calc-section" id="apartmentSection">
            <h2 class="calc-section-title">ì•„íŒŒíŠ¸ ê´€ë¦¬ë¹„</h2>
            
            <div class="input-group">
                <label class="input-label">ì¼ë°˜ê´€ë¦¬ë¹„ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="generalFee" class="input-field" placeholder="ì˜ˆ: 50000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì²­ì†Œë¹„, ê²½ë¹„ë¹„, ìŠ¹ê°•ê¸° ìœ ì§€ë¹„ ë“±</div>
            </div>

            <div class="input-group">
                <label class="input-label">ìˆ˜ì„ ìœ ì§€ë¹„ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="repairFee" class="input-field" placeholder="ì˜ˆ: 20000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ê±´ë¬¼ ìˆ˜ì„  ë° ìœ ì§€ê´€ë¦¬ ë¹„ìš©</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì¥ê¸°ìˆ˜ì„ ì¶©ë‹¹ê¸ˆ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="reserveFund" class="input-field" placeholder="ì˜ˆ: 30000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì¥ê¸°ìˆ˜ì„ ì„ ìœ„í•œ ì ë¦½ê¸ˆ</div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ê³µê³¼ê¸ˆ</h2>
            
            <div class="input-group">
                <label class="input-label">ì „ê¸°ë£Œ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="electricityFee" class="input-field" placeholder="ì˜ˆ: 80000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ìˆ˜ë„ë£Œ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="waterFee" class="input-field" placeholder="ì˜ˆ: 30000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ê°€ìŠ¤ë¹„ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="gasFee" class="input-field" placeholder="ì˜ˆ: 60000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ë‚œë°©ë¹„ (ë™ì ˆê¸° ì¶”ê°€, ì›” í‰ê· )</label>
                <div class="input-wrapper">
                    <input type="text" id="heatingFee" class="input-field" placeholder="ì˜ˆ: 100000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ê²¨ìš¸ì²  ì¶”ê°€ ë‚œë°©ë¹„ë¥¼ ì›”í‰ê· ìœ¼ë¡œ ê³„ì‚°</div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ê¸°íƒ€ ë¹„ìš©</h2>
            
            <div class="input-group">
                <label class="input-label">ì¸í„°ë„·/TV (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="internetFee" class="input-field" placeholder="ì˜ˆ: 40000" inputmode="numeric" value="0">
                    <span class="input-suffix">ì›</span>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ì£¼ì°¨ë¹„ (ì›”)</label>
                <div class="input-wrapper">
                    <input type="text" id="parkingFee" class="input-field" placeholder="0" inputmode="numeric" value="0">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì•„íŒŒíŠ¸ ì™¸ ë³„ë„ ì£¼ì°¨ì¥ ì´ìš© ì‹œ</div>
            </div>

            <div class="input-group">
                <label class="input-label">í™”ì¬ë³´í—˜ë£Œ (ì—°ê°„)</label>
                <div class="input-wrapper">
                    <input type="text" id="insuranceFee" class="input-field" placeholder="ì˜ˆ: 200000" inputmode="numeric" value="0">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì£¼íƒ í™”ì¬ë³´í—˜ë£Œ (ì—°ê°„ ê¸ˆì•¡ ì…ë ¥)</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì¬ì‚°ì„¸ (ì—°ê°„)</label>
                <div class="input-wrapper">
                    <input type="text" id="propertyTax" class="input-field" placeholder="ì˜ˆ: 1500000" inputmode="numeric" value="0">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì—°ê°„ ì¬ì‚°ì„¸ë¥¼ ì›”í•  ê³„ì‚°í•©ë‹ˆë‹¤</div>
            </div>

            <button class="calc-button" id="calculateButton">
                ì›” ìœ ì§€ë¹„ ê³„ì‚°í•˜ê¸°
            </button>
        </div>

        <!-- ê²°ê³¼ ì˜ì—­ -->
        <div id="resultSection" class="result-section" style="display: none;">
            <h2 class="result-title">ğŸ’° ê³„ì‚° ê²°ê³¼</h2>
            
            <div class="result-card total">
                <div class="result-label">ì›”ê°„ ì´ ìœ ì§€ë¹„</div>
                <div class="result-value" id="totalMonthlyCost">0ì›</div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ê´€ë¦¬ë¹„ í•­ëª©</h3>
                <div class="breakdown-item" id="generalFeeItem">
                    <span class="breakdown-label">ì¼ë°˜ê´€ë¦¬ë¹„</span>
                    <span class="breakdown-value" id="displayGeneralFee">0ì›</span>
                </div>
                <div class="breakdown-item" id="repairFeeItem">
                    <span class="breakdown-label">ìˆ˜ì„ ìœ ì§€ë¹„</span>
                    <span class="breakdown-value" id="displayRepairFee">0ì›</span>
                </div>
                <div class="breakdown-item" id="reserveFundItem">
                    <span class="breakdown-label">ì¥ê¸°ìˆ˜ì„ ì¶©ë‹¹ê¸ˆ</span>
                    <span class="breakdown-value" id="displayReserveFund">0ì›</span>
                </div>
                <div class="breakdown-item" id="managementSubtotal" style="border-top: 1px solid var(--border); padding-top: 12px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 600;">ê´€ë¦¬ë¹„ ì†Œê³„</span>
                    <span class="breakdown-value" style="font-weight: 600;" id="managementTotal">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ê³µê³¼ê¸ˆ</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì „ê¸°ë£Œ</span>
                    <span class="breakdown-value" id="displayElectricityFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ìˆ˜ë„ë£Œ</span>
                    <span class="breakdown-value" id="displayWaterFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ê°€ìŠ¤ë¹„</span>
                    <span class="breakdown-value" id="displayGasFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ë‚œë°©ë¹„ (ì›”í‰ê· )</span>
                    <span class="breakdown-value" id="displayHeatingFee">0ì›</span>
                </div>
                <div class="breakdown-item" style="border-top: 1px solid var(--border); padding-top: 12px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 600;">ê³µê³¼ê¸ˆ ì†Œê³„</span>
                    <span class="breakdown-value" style="font-weight: 600;" id="utilityTotal">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ê¸°íƒ€ ë¹„ìš©</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì¸í„°ë„·/TV</span>
                    <span class="breakdown-value" id="displayInternetFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì£¼ì°¨ë¹„</span>
                    <span class="breakdown-value" id="displayParkingFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">í™”ì¬ë³´í—˜ë£Œ (ì›”í• )</span>
                    <span class="breakdown-value" id="monthlyInsuranceFee">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì¬ì‚°ì„¸ (ì›”í• )</span>
                    <span class="breakdown-value" id="monthlyPropertyTax">0ì›</span>
                </div>
                <div class="breakdown-item" style="border-top: 1px solid var(--border); padding-top: 12px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 600;">ê¸°íƒ€ ë¹„ìš© ì†Œê³„</span>
                    <span class="breakdown-value" style="font-weight: 600;" id="otherTotal">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ì—°ê°„ ì˜ˆìƒ ë¹„ìš©</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì›”ê°„ ì´ ìœ ì§€ë¹„</span>
                    <span class="breakdown-value" id="displayMonthlyCost">0ì›</span>
                </div>
                <div class="breakdown-item" style="background: rgba(0, 102, 255, 0.05); padding: 12px; border-radius: 8px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 700;">ì—°ê°„ ì´ ìœ ì§€ë¹„</span>
                    <span class="breakdown-value" style="font-weight: 700; color: var(--primary);" id="annualCost">0ì›</span>
                </div>
            </div>

            <div class="result-info">
                <div class="info-icon">â„¹ï¸</div>
                <div class="info-text" id="costInfo"></div>
            </div>

            <div class="result-info" style="background: rgba(0, 217, 181, 0.05); border-color: rgba(0, 217, 181, 0.2);">
                <div class="info-icon">ğŸ’¡</div>
                <div class="info-text">
                    <strong>ì ˆì•½ íŒ</strong><br>
                    â€¢ ì „ê¸°ë£Œ: LED ì „êµ¬ ì‚¬ìš©, ëŒ€ê¸°ì „ë ¥ ì°¨ë‹¨<br>
                    â€¢ ìˆ˜ë„ë£Œ: ì ˆìˆ˜ ìƒ¤ì›Œí—¤ë“œ, ì„¸íƒê¸° ëª¨ì•„ì„œ ì‚¬ìš©<br>
                    â€¢ ë‚œë°©ë¹„: ë³´ì¼ëŸ¬ ì ì • ì˜¨ë„ ìœ ì§€ (18~20ë„), ë‹¨ì—´ ê°•í™”<br>
                    â€¢ ê´€ë¦¬ë¹„: ë¶ˆí•„ìš”í•œ ì„œë¹„ìŠ¤ í•´ì§€, ê³µë™ êµ¬ë§¤ ì°¸ì—¬
                </div>
            </div>

            <div class="result-actions">
                <button class="action-button secondary" id="resetButton">
                    ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°
                </button>
                <button class="action-button primary" id="shareButton">
                    ê²°ê³¼ ê³µìœ í•˜ê¸°
                </button>
            </div>
        </div>
    </main>

    <script>
        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            // ê³„ì‚° ë²„íŠ¼
            const calculateButton = document.getElementById('calculateButton');
            if (calculateButton) {
                calculateButton.addEventListener('click', calculateMaintenanceCost);
            }

            // ë¦¬ì…‹ ë²„íŠ¼
            const resetButton = document.getElementById('resetButton');
            if (resetButton) {
                resetButton.addEventListener('click', resetCalculator);
            }

            // ê³µìœ  ë²„íŠ¼
            const shareButton = document.getElementById('shareButton');
            if (shareButton) {
                shareButton.addEventListener('click', shareResult);
            }

            // ì£¼íƒ ìœ í˜• ë³€ê²½
            const houseTypeInputs = document.querySelectorAll('input[name="houseType"]');
            houseTypeInputs.forEach(input => {
                input.addEventListener('change', function() {
                    const apartmentSection = document.getElementById('apartmentSection');
                    if (this.value === 'apartment') {
                        apartmentSection.style.display = 'block';
                    } else {
                        apartmentSection.style.display = 'none';
                    }
                });
            });

            // ìˆ«ì ì…ë ¥ í•„ë“œ í¬ë§·íŒ…
            const numericInputs = ['area', 'generalFee', 'repairFee', 'reserveFund', 'electricityFee', 
                                   'waterFee', 'gasFee', 'heatingFee', 'internetFee', 'parkingFee', 
                                   'insuranceFee', 'propertyTax'];
            numericInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/[^0-9.]/g, '');
                        e.target.value = value;
                    });

                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            calculateMaintenanceCost();
                        }
                    });
                }
            });
        });

        // ìˆ«ì í¬ë§·íŒ…
        function formatNumber(num) {
            return new Intl.NumberFormat('ko-KR').format(Math.floor(num));
        }

        function formatCurrency(num) {
            return formatNumber(num) + 'ì›';
        }

        function formatKoreanCurrency(num) {
            const billion = Math.floor(num / 100000000);
            const tenThousand = Math.floor((num % 100000000) / 10000);
            const remainder = num % 10000;
            
            let result = '';
            if (billion > 0) result += billion + 'ì–µ ';
            if (tenThousand > 0) result += formatNumber(tenThousand) + 'ë§Œ ';
            if (remainder > 0 && billion === 0) result += formatNumber(remainder);
            
            return result.trim() + 'ì›';
        }

        // ê´€ë¦¬ë¹„ ê³„ì‚° í•¨ìˆ˜
        function calculateMaintenanceCost() {
            const houseType = document.querySelector('input[name="houseType"]:checked').value;
            const area = parseFloat(document.getElementById('area').value) || 0;
            const residents = parseInt(document.querySelector('input[name="residents"]:checked').value);

            // ê´€ë¦¬ë¹„ (ì•„íŒŒíŠ¸ë§Œ)
            let generalFee = 0;
            let repairFee = 0;
            let reserveFund = 0;

            if (houseType === 'apartment') {
                generalFee = parseInt(document.getElementById('generalFee').value) || 0;
                repairFee = parseInt(document.getElementById('repairFee').value) || 0;
                reserveFund = parseInt(document.getElementById('reserveFund').value) || 0;
            }

            // ê³µê³¼ê¸ˆ
            const electricityFee = parseInt(document.getElementById('electricityFee').value) || 0;
            const waterFee = parseInt(document.getElementById('waterFee').value) || 0;
            const gasFee = parseInt(document.getElementById('gasFee').value) || 0;
            const heatingFee = parseInt(document.getElementById('heatingFee').value) || 0;

            // ê¸°íƒ€ ë¹„ìš©
            const internetFee = parseInt(document.getElementById('internetFee').value) || 0;
            const parkingFee = parseInt(document.getElementById('parkingFee').value) || 0;
            const insuranceFee = parseInt(document.getElementById('insuranceFee').value) || 0;
            const propertyTax = parseInt(document.getElementById('propertyTax').value) || 0;

            // ì›”í•  ê³„ì‚°
            const monthlyInsuranceFee = insuranceFee / 12;
            const monthlyPropertyTax = propertyTax / 12;

            // ì†Œê³„ ê³„ì‚°
            const managementTotal = generalFee + repairFee + reserveFund;
            const utilityTotal = electricityFee + waterFee + gasFee + heatingFee;
            const otherTotal = internetFee + parkingFee + monthlyInsuranceFee + monthlyPropertyTax;

            // ì›”ê°„ ì´ ìœ ì§€ë¹„
            const totalMonthlyCost = managementTotal + utilityTotal + otherTotal;

            // ì—°ê°„ ì´ ìœ ì§€ë¹„
            const annualCost = totalMonthlyCost * 12;

            // ì•ˆë‚´ ë©”ì‹œì§€
            let costInfo = '';
            if (houseType === 'apartment') {
                costInfo = `${area}ã¡ ì•„íŒŒíŠ¸ ${residents}ì¸ ê°€êµ¬ ê¸°ì¤€ ì›” ${formatKoreanCurrency(totalMonthlyCost)}ì˜ ìœ ì§€ë¹„ê°€ ë°œìƒí•©ë‹ˆë‹¤.`;
            } else if (houseType === 'villa') {
                costInfo = `${area}ã¡ ë¹Œë¼/ì—°ë¦½ ${residents}ì¸ ê°€êµ¬ ê¸°ì¤€ ì›” ${formatKoreanCurrency(totalMonthlyCost)}ì˜ ìœ ì§€ë¹„ê°€ ë°œìƒí•©ë‹ˆë‹¤.`;
            } else {
                costInfo = `${area}ã¡ ë‹¨ë…ì£¼íƒ ${residents}ì¸ ê°€êµ¬ ê¸°ì¤€ ì›” ${formatKoreanCurrency(totalMonthlyCost)}ì˜ ìœ ì§€ë¹„ê°€ ë°œìƒí•©ë‹ˆë‹¤.`;
            }

            // 1ã¡ë‹¹ ìœ ì§€ë¹„
            if (area > 0) {
                const costPerArea = totalMonthlyCost / area;
                costInfo += ` (ã¡ë‹¹ ì›” ${formatCurrency(costPerArea)})`;
            }

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalMonthlyCost').textContent = formatKoreanCurrency(totalMonthlyCost);
            document.getElementById('displayMonthlyCost').textContent = formatCurrency(totalMonthlyCost);
            document.getElementById('annualCost').textContent = formatCurrency(annualCost);

            // ê´€ë¦¬ë¹„ í•­ëª© (ì•„íŒŒíŠ¸ë§Œ í‘œì‹œ)
            const generalFeeItem = document.getElementById('generalFeeItem');
            const repairFeeItem = document.getElementById('repairFeeItem');
            const reserveFundItem = document.getElementById('reserveFundItem');
            const managementSubtotal = document.getElementById('managementSubtotal');

            if (houseType === 'apartment') {
                generalFeeItem.style.display = 'flex';
                repairFeeItem.style.display = 'flex';
                reserveFundItem.style.display = 'flex';
                managementSubtotal.style.display = 'flex';
                
                document.getElementById('displayGeneralFee').textContent = formatCurrency(generalFee);
                document.getElementById('displayRepairFee').textContent = formatCurrency(repairFee);
                document.getElementById('displayReserveFund').textContent = formatCurrency(reserveFund);
                document.getElementById('managementTotal').textContent = formatCurrency(managementTotal);
            } else {
                generalFeeItem.style.display = 'none';
                repairFeeItem.style.display = 'none';
                reserveFundItem.style.display = 'none';
                managementSubtotal.style.display = 'none';
            }

            // ê³µê³¼ê¸ˆ
            document.getElementById('displayElectricityFee').textContent = formatCurrency(electricityFee);
            document.getElementById('displayWaterFee').textContent = formatCurrency(waterFee);
            document.getElementById('displayGasFee').textContent = formatCurrency(gasFee);
            document.getElementById('displayHeatingFee').textContent = formatCurrency(heatingFee);
            document.getElementById('utilityTotal').textContent = formatCurrency(utilityTotal);

            // ê¸°íƒ€ ë¹„ìš©
            document.getElementById('displayInternetFee').textContent = formatCurrency(internetFee);
            document.getElementById('displayParkingFee').textContent = formatCurrency(parkingFee);
            document.getElementById('monthlyInsuranceFee').textContent = formatCurrency(monthlyInsuranceFee);
            document.getElementById('monthlyPropertyTax').textContent = formatCurrency(monthlyPropertyTax);
            document.getElementById('otherTotal').textContent = formatCurrency(otherTotal);

            document.getElementById('costInfo').textContent = costInfo;

            // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ê³„ì‚°ê¸° ë¦¬ì…‹
        function resetCalculator() {
            document.getElementById('area').value = '';
            document.querySelector('input[name="houseType"][value="apartment"]').checked = true;
            document.querySelector('input[name="residents"][value="2"]').checked = true;
            document.getElementById('generalFee').value = '';
            document.getElementById('repairFee').value = '';
            document.getElementById('reserveFund').value = '';
            document.getElementById('electricityFee').value = '';
            document.getElementById('waterFee').value = '';
            document.getElementById('gasFee').value = '';
            document.getElementById('heatingFee').value = '';
            document.getElementById('internetFee').value = '0';
            document.getElementById('parkingFee').value = '0';
            document.getElementById('insuranceFee').value = '0';
            document.getElementById('propertyTax').value = '0';
            document.getElementById('apartmentSection').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ê²°ê³¼ ê³µìœ 
        function shareResult() {
            const totalMonthlyCost = document.getElementById('totalMonthlyCost').textContent;
            const annualCost = document.getElementById('annualCost').textContent;
            const text = `ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°ì—ì„œ ìœ ì§€ë¹„ë¥¼ ê³„ì‚°í–ˆì–´ìš”!\nì›”ê°„ ì´ ìœ ì§€ë¹„: ${totalMonthlyCost}\nì—°ê°„ ì´ ìœ ì§€ë¹„: ${annualCost}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ê´€ë¦¬ë¹„ ë° ìœ ì§€ë¹„ ê³„ì‚° ê²°ê³¼',
                    text: text
                });
            } else {
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                navigator.clipboard.writeText(text);
            }
        }
    </script>
</body>
</html>
