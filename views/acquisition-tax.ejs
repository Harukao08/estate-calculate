<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì·¨ë“ì„¸ ê³„ì‚°ê¸° - ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&family=Archivo:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/calculator.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">ë¶€</div>
            <a href="/" style="text-decoration: none; color: inherit;">ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding-top: 32px; padding-bottom: 80px;">
        <a href="/buy" class="back-button">
            â† ì§‘ì„ ì‚¬ë ¤ê³  í•´ìš”
        </a>

        <div class="calculator-header">
            <div class="calculator-icon-large">ğŸ›ï¸</div>
            <h1 class="calculator-title">ì·¨ë“ì„¸ ê³„ì‚°ê¸°</h1>
            <p class="calculator-subtitle">ë¶€ë™ì‚° ì·¨ë“ ì‹œ ë‚´ì•¼ í•  ì„¸ê¸ˆì„ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>

        <!-- ì·¨ë“ì„¸ ì•ˆë‚´ -->
        <div class="info-box">
            <div class="info-title">
                ğŸ’¡ ì·¨ë“ì„¸ë€?
            </div>
            <div class="info-content">
                ë¶€ë™ì‚°ì„ ì·¨ë“í•  ë•Œ ë‚´ëŠ” ì§€ë°©ì„¸ì…ë‹ˆë‹¤. ì·¨ë“ ì›ì¸, ë¶€ë™ì‚° ì¢…ë¥˜, ë©´ì , ë³´ìœ  ì£¼íƒ ìˆ˜ì— ë”°ë¼ ì„¸ìœ¨ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
            </div>
        </div>

        <!-- ê³„ì‚° ì…ë ¥ í¼ -->
        <div class="calc-section">
            <h2 class="calc-section-title">ì·¨ë“ ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ì·¨ë“ ê°€ì•¡</label>
                <div class="input-wrapper">
                    <input type="text" id="price" class="input-field" placeholder="ì˜ˆ: 500000000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì‹¤ì œ ê±°ë˜ê°€ê²© ë˜ëŠ” ì¦ì—¬ê°€ì•¡</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì·¨ë“ ì›ì¸</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="acquisitionType" value="sale" checked>
                        <span class="radio-label">ë§¤ë§¤</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="acquisitionType" value="gift">
                        <span class="radio-label">ì¦ì—¬</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="acquisitionType" value="inheritance">
                        <span class="radio-label">ìƒì†</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="acquisitionType" value="original">
                        <span class="radio-label">ì›ì‹œì·¨ë“</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ë¶€ë™ì‚° ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ë¶€ë™ì‚° ì¢…ë¥˜</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="propertyType" value="house" checked>
                        <span class="radio-label">ì£¼íƒ</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="propertyType" value="officetel">
                        <span class="radio-label">ì˜¤í”¼ìŠ¤í…”</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="propertyType" value="farmland">
                        <span class="radio-label">ë†ì§€</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="propertyType" value="other">
                        <span class="radio-label">ê·¸ ì™¸</span>
                    </label>
                </div>
            </div>

            <div class="input-group" id="areaSection">
                <label class="input-label">ì „ìš©ë©´ì </label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="area" value="40">
                        <span class="radio-label">40ã¡ ì´í•˜</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="area" value="60">
                        <span class="radio-label">60ã¡ ì´í•˜</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="area" value="85" checked>
                        <span class="radio-label">85ã¡ ì´í•˜</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="area" value="over85">
                        <span class="radio-label">85ã¡ ì´ˆê³¼</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ì·¨ë“ì ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ë³´ìœ  ì£¼íƒ ìˆ˜ (ì·¨ë“ í›„ ê¸°ì¤€)</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="0" checked>
                        <span class="radio-label">ë¬´ì£¼íƒ</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="1">
                        <span class="radio-label">1ì£¼íƒ</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="2">
                        <span class="radio-label">2ì£¼íƒ</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="3">
                        <span class="radio-label">3ì£¼íƒ ì´ìƒ</span>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ì·¨ë“ì êµ¬ë¶„</label>
                <div class="radio-group" style="grid-template-columns: 1fr;">
                    <label class="radio-item">
                        <input type="radio" name="buyerType" value="individual" checked>
                        <span class="radio-label">ê°œì¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="buyerType" value="corporation">
                        <span class="radio-label">ë²•ì¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="buyerType" value="rental">
                        <span class="radio-label">ì„ëŒ€ì‚¬ì—…ì</span>
                    </label>
                </div>
            </div>

            <div class="input-group" id="firstBuySection">
                <label class="input-label">ìƒì• ìµœì´ˆ ì£¼íƒ êµ¬ì…</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="firstBuy" value="no" checked>
                        <span class="radio-label">ì•„ë‹ˆì˜¤</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="firstBuy" value="yes">
                        <span class="radio-label">ì˜ˆ</span>
                    </label>
                </div>
                <div class="input-helper">ë¬´ì£¼íƒ ì„¸ëŒ€ì£¼ê°€ ì²˜ìŒìœ¼ë¡œ ì£¼íƒì„ êµ¬ì…í•˜ëŠ” ê²½ìš°</div>
            </div>

            <div class="input-group" id="newSupplySection">
                <label class="input-label">ìµœì´ˆ ë¶„ì–‘</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="newSupply" value="no" checked>
                        <span class="radio-label">ì•„ë‹ˆì˜¤ (ê¸°ì¡´ì£¼íƒ)</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="newSupply" value="yes">
                        <span class="radio-label">ì˜ˆ (ì‹ ì¶•ë¶„ì–‘)</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ì§€ì—­ ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ì†Œì¬ì§€</label>
                <div class="radio-group" style="grid-template-columns: 1fr;">
                    <label class="radio-item">
                        <input type="radio" name="location" value="regulated" checked>
                        <span class="radio-label">ì¡°ì •ëŒ€ìƒì§€ì—­</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="location" value="metro">
                        <span class="radio-label">ìˆ˜ë„ê¶Œ (ì¡°ì •ì§€ì—­ ì œì™¸)</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="location" value="exempt">
                        <span class="radio-label">ì¤‘ê³¼ ë°°ì œì§€ì—­</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="location" value="other">
                        <span class="radio-label">ê¸°íƒ€ ì§€ì—­</span>
                    </label>
                </div>
            </div>

            <button class="calc-button" id="calculateButton">
                ì·¨ë“ì„¸ ê³„ì‚°í•˜ê¸°
            </button>
        </div>

        <!-- ê²°ê³¼ ì˜ì—­ -->
        <div id="resultSection" class="result-section" style="display: none;">
            <h2 class="result-title">ğŸ’° ê³„ì‚° ê²°ê³¼</h2>
            
            <div class="result-card total">
                <div class="result-label">ì´ ì·¨ë“ì„¸</div>
                <div class="result-value" id="totalTax">0ì›</div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ì„¸ì•¡ ìƒì„¸</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì·¨ë“ê°€ì•¡</span>
                    <span class="breakdown-value" id="displayPrice">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì ìš© ì„¸ìœ¨</span>
                    <span class="breakdown-value" id="taxRate">0%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì·¨ë“ì„¸ ë³¸ì„¸</span>
                    <span class="breakdown-value" id="baseTax">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì§€ë°©êµìœ¡ì„¸ (ë³¸ì„¸ Ã— 10%)</span>
                    <span class="breakdown-value" id="educationTax">0ì›</span>
                </div>
                <div class="breakdown-item" id="ruralTaxItem">
                    <span class="breakdown-label">ë†ì–´ì´ŒíŠ¹ë³„ì„¸ (0.2%)</span>
                    <span class="breakdown-value" id="ruralTax">0ì›</span>
                </div>
            </div>

            <div class="result-info">
                <div class="info-icon">â„¹ï¸</div>
                <div class="info-text" id="taxInfo"></div>
            </div>

            <div class="result-info" style="background: rgba(255, 87, 51, 0.05); border-color: rgba(255, 87, 51, 0.2);" id="warningBox">
                <div class="info-icon">âš ï¸</div>
                <div class="info-text" id="warningText"></div>
            </div>

            <div class="result-actions">
                <button class="action-button secondary" id="resetButton">
                    ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°
                </button>
                <button class="action-button primary" id="shareButton">
                    ê²°ê³¼ ê³µìœ í•˜ê¸°
                </button>
            </div>
        </div>
    </main>

    <script>
        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            const calculateButton = document.getElementById('calculateButton');
            if (calculateButton) {
                calculateButton.addEventListener('click', calculateAcquisitionTax);
            }

            const resetButton = document.getElementById('resetButton');
            if (resetButton) {
                resetButton.addEventListener('click', resetCalculator);
            }

            const shareButton = document.getElementById('shareButton');
            if (shareButton) {
                shareButton.addEventListener('click', shareResult);
            }

            // ìˆ«ì ì…ë ¥ í•„ë“œ
            const priceInput = document.getElementById('price');
            if (priceInput) {
                priceInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/[^0-9]/g, '');
                    e.target.value = value;
                });
                priceInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') calculateAcquisitionTax();
                });
            }

            // ë¶€ë™ì‚° ì¢…ë¥˜ì— ë”°ë¼ ë©´ì  ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
            const propertyTypeInputs = document.querySelectorAll('input[name="propertyType"]');
            propertyTypeInputs.forEach(input => {
                input.addEventListener('change', updateVisibility);
            });

            // ë³´ìœ  ì£¼íƒ ìˆ˜ì— ë”°ë¼ ìƒì• ìµœì´ˆ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
            const housingCountInputs = document.querySelectorAll('input[name="housingCount"]');
            housingCountInputs.forEach(input => {
                input.addEventListener('change', updateVisibility);
            });

            // ì·¨ë“ì êµ¬ë¶„ì— ë”°ë¼ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
            const buyerTypeInputs = document.querySelectorAll('input[name="buyerType"]');
            buyerTypeInputs.forEach(input => {
                input.addEventListener('change', updateVisibility);
            });

            function updateVisibility() {
                const propertyType = document.querySelector('input[name="propertyType"]:checked').value;
                const housingCount = document.querySelector('input[name="housingCount"]:checked').value;
                const buyerType = document.querySelector('input[name="buyerType"]:checked').value;

                // ë©´ì  ì„¹ì…˜ (ì£¼íƒ, ì˜¤í”¼ìŠ¤í…”ë§Œ)
                const areaSection = document.getElementById('areaSection');
                if (propertyType === 'house' || propertyType === 'officetel') {
                    areaSection.style.display = 'block';
                } else {
                    areaSection.style.display = 'none';
                }

                // ìƒì• ìµœì´ˆ ì„¹ì…˜ (ê°œì¸ + ë¬´ì£¼íƒë§Œ)
                const firstBuySection = document.getElementById('firstBuySection');
                if (buyerType === 'individual' && housingCount === '0' && propertyType === 'house') {
                    firstBuySection.style.display = 'block';
                } else {
                    firstBuySection.style.display = 'none';
                }

                // ìµœì´ˆ ë¶„ì–‘ ì„¹ì…˜ (ì£¼íƒë§Œ)
                const newSupplySection = document.getElementById('newSupplySection');
                if (propertyType === 'house') {
                    newSupplySection.style.display = 'block';
                } else {
                    newSupplySection.style.display = 'none';
                }
            }

            updateVisibility();
        });

        function formatNumber(num) {
            return new Intl.NumberFormat('ko-KR').format(Math.floor(num));
        }

        function formatCurrency(num) {
            return formatNumber(num) + 'ì›';
        }

        function formatKoreanCurrency(num) {
            const billion = Math.floor(num / 100000000);
            const tenThousand = Math.floor((num % 100000000) / 10000);
            const remainder = num % 10000;
            
            let result = '';
            if (billion > 0) result += billion + 'ì–µ ';
            if (tenThousand > 0) result += formatNumber(tenThousand) + 'ë§Œ ';
            if (remainder > 0 && billion === 0) result += formatNumber(remainder);
            
            return result.trim() + 'ì›';
        }

        function calculateAcquisitionTax() {
            const price = parseInt(document.getElementById('price').value) || 0;
            
            if (price === 0) {
                alert('ì·¨ë“ê°€ì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const acquisitionType = document.querySelector('input[name="acquisitionType"]:checked').value;
            const propertyType = document.querySelector('input[name="propertyType"]:checked').value;
            const area = document.querySelector('input[name="area"]:checked')?.value;
            const housingCount = document.querySelector('input[name="housingCount"]:checked').value;
            const buyerType = document.querySelector('input[name="buyerType"]:checked').value;
            const firstBuy = document.querySelector('input[name="firstBuy"]:checked')?.value === 'yes';
            const newSupply = document.querySelector('input[name="newSupply"]:checked')?.value === 'yes';
            const location = document.querySelector('input[name="location"]:checked').value;

            let taxRate = 0;
            let taxInfo = '';
            let warningText = '';

            // ì·¨ë“ì„¸ìœ¨ ê²°ì •
            if (acquisitionType === 'sale') {
                // ë§¤ë§¤
                if (propertyType === 'house') {
                    // ì£¼íƒ
                    if (buyerType === 'corporation') {
                        // ë²•ì¸
                        taxRate = 0.12; // 12%
                        taxInfo = 'ë²•ì¸ì˜ ì£¼íƒ ì·¨ë“: 12% ì„¸ìœ¨ ì ìš©';
                        warningText = 'ë²•ì¸ì˜ ì£¼íƒ ì·¨ë“ì€ ë†’ì€ ì„¸ìœ¨ì´ ì ìš©ë©ë‹ˆë‹¤.';
                    } else if (buyerType === 'rental') {
                        // ì„ëŒ€ì‚¬ì—…ì
                        taxRate = 0.01; // 1%
                        taxInfo = 'ì„ëŒ€ì‚¬ì—…ì ì£¼íƒ ì·¨ë“: 1% ì„¸ìœ¨ ì ìš©';
                    } else {
                        // ê°œì¸
                        if (firstBuy && price <= 1200000000) {
                            // ìƒì• ìµœì´ˆ (12ì–µ ì´í•˜)
                            if (price <= 600000000) {
                                taxRate = 0.01; // 1%
                                taxInfo = 'ìƒì• ìµœì´ˆ ì£¼íƒ êµ¬ì… (6ì–µ ì´í•˜): 1% ì„¸ìœ¨ ì ìš©';
                            } else if (price <= 900000000) {
                                taxRate = 0.02; // 2%
                                taxInfo = 'ìƒì• ìµœì´ˆ ì£¼íƒ êµ¬ì… (6~9ì–µ): 2% ì„¸ìœ¨ ì ìš©';
                            } else {
                                taxRate = 0.03; // 3%
                                taxInfo = 'ìƒì• ìµœì´ˆ ì£¼íƒ êµ¬ì… (9~12ì–µ): 3% ì„¸ìœ¨ ì ìš©';
                            }
                        } else if (housingCount === '0') {
                            // 1ì£¼íƒ (ìƒì• ìµœì´ˆ ì•„ë‹˜)
                            if (price <= 600000000) {
                                taxRate = 0.01; // 1%
                                taxInfo = '1ì£¼íƒ ì·¨ë“ (6ì–µ ì´í•˜): 1% ì„¸ìœ¨ ì ìš©';
                            } else if (price <= 900000000) {
                                taxRate = 0.02; // 2%
                                taxInfo = '1ì£¼íƒ ì·¨ë“ (6~9ì–µ): 2% ì„¸ìœ¨ ì ìš©';
                            } else {
                                taxRate = 0.03; // 3%
                                taxInfo = '1ì£¼íƒ ì·¨ë“ (9ì–µ ì´ˆê³¼): 3% ì„¸ìœ¨ ì ìš©';
                            }
                        } else if (housingCount === '1') {
                            // 2ì£¼íƒ
                            if (location === 'regulated') {
                                taxRate = 0.08; // 8%
                                taxInfo = 'ì¡°ì •ëŒ€ìƒì§€ì—­ 2ì£¼íƒ: 8% ì¤‘ê³¼ì„¸ìœ¨ ì ìš©';
                                warningText = 'ì¡°ì •ëŒ€ìƒì§€ì—­ì—ì„œ 2ì£¼íƒ ì·¨ë“ ì‹œ ì¤‘ê³¼ì„¸ìœ¨ì´ ì ìš©ë©ë‹ˆë‹¤.';
                            } else if (location === 'exempt') {
                                taxRate = 0.01; // 1%
                                taxInfo = 'ì¤‘ê³¼ ë°°ì œì§€ì—­ 2ì£¼íƒ: 1% ì„¸ìœ¨ ì ìš©';
                            } else {
                                taxRate = 0.04; // 4%
                                taxInfo = 'ì¼ë°˜ì§€ì—­ 2ì£¼íƒ: 4% ì„¸ìœ¨ ì ìš©';
                            }
                        } else {
                            // 3ì£¼íƒ ì´ìƒ
                            if (location === 'regulated') {
                                taxRate = 0.12; // 12%
                                taxInfo = 'ì¡°ì •ëŒ€ìƒì§€ì—­ 3ì£¼íƒ ì´ìƒ: 12% ì¤‘ê³¼ì„¸ìœ¨ ì ìš©';
                                warningText = 'ì¡°ì •ëŒ€ìƒì§€ì—­ì—ì„œ 3ì£¼íƒ ì´ìƒ ì·¨ë“ ì‹œ ìµœê³ ì„¸ìœ¨ì´ ì ìš©ë©ë‹ˆë‹¤.';
                            } else if (location === 'exempt') {
                                taxRate = 0.01; // 1%
                                taxInfo = 'ì¤‘ê³¼ ë°°ì œì§€ì—­ 3ì£¼íƒ ì´ìƒ: 1% ì„¸ìœ¨ ì ìš©';
                            } else {
                                taxRate = 0.04; // 4%
                                taxInfo = 'ì¼ë°˜ì§€ì—­ 3ì£¼íƒ ì´ìƒ: 4% ì„¸ìœ¨ ì ìš©';
                            }
                        }
                    }
                } else if (propertyType === 'officetel') {
                    // ì˜¤í”¼ìŠ¤í…”
                    taxRate = 0.04; // 4%
                    taxInfo = 'ì˜¤í”¼ìŠ¤í…” ì·¨ë“: 4% ì„¸ìœ¨ ì ìš©';
                } else if (propertyType === 'farmland') {
                    // ë†ì§€
                    taxRate = 0.03; // 3%
                    taxInfo = 'ë†ì§€ ì·¨ë“: 3% ì„¸ìœ¨ ì ìš©';
                } else {
                    // ê¸°íƒ€ (í† ì§€, ìƒê°€ ë“±)
                    taxRate = 0.04; // 4%
                    taxInfo = 'í† ì§€ ë° ê±´ë¬¼ ì·¨ë“: 4% ì„¸ìœ¨ ì ìš©';
                }
            } else if (acquisitionType === 'gift') {
                // ì¦ì—¬
                taxRate = 0.035; // 3.5%
                taxInfo = 'ì¦ì—¬ë¡œ ì¸í•œ ì·¨ë“: 3.5% ì„¸ìœ¨ ì ìš©';
            } else if (acquisitionType === 'inheritance') {
                // ìƒì†
                taxRate = 0.028; // 2.8%
                taxInfo = 'ìƒì†ìœ¼ë¡œ ì¸í•œ ì·¨ë“: 2.8% ì„¸ìœ¨ ì ìš©';
            } else {
                // ì›ì‹œì·¨ë“
                taxRate = 0.028; // 2.8%
                taxInfo = 'ì›ì‹œì·¨ë“: 2.8% ì„¸ìœ¨ ì ìš©';
            }

            // ì·¨ë“ì„¸ ë³¸ì„¸
            const baseTax = price * taxRate;

            // ì§€ë°©êµìœ¡ì„¸ (ë³¸ì„¸ì˜ 10%)
            const educationTax = baseTax * 0.1;

            // ë†ì–´ì´ŒíŠ¹ë³„ì„¸ (6ì–µ ì´ˆê³¼ ì‹œ 0.2%)
            let ruralTax = 0;
            let showRuralTax = false;
            if (propertyType === 'house' && price > 600000000 && acquisitionType === 'sale') {
                ruralTax = price * 0.002; // 0.2%
                showRuralTax = true;
            }

            // ì´ ì·¨ë“ì„¸
            const totalTax = baseTax + educationTax + ruralTax;

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalTax').textContent = formatKoreanCurrency(totalTax);
            document.getElementById('displayPrice').textContent = formatCurrency(price);
            document.getElementById('taxRate').textContent = (taxRate * 100).toFixed(1) + '%';
            document.getElementById('baseTax').textContent = formatCurrency(baseTax);
            document.getElementById('educationTax').textContent = formatCurrency(educationTax);
            document.getElementById('ruralTax').textContent = formatCurrency(ruralTax);
            document.getElementById('taxInfo').textContent = taxInfo;

            // ë†íŠ¹ì„¸ í•­ëª© í‘œì‹œ/ìˆ¨ê¹€
            const ruralTaxItem = document.getElementById('ruralTaxItem');
            if (showRuralTax) {
                ruralTaxItem.style.display = 'flex';
            } else {
                ruralTaxItem.style.display = 'none';
            }

            // ê²½ê³  ë©”ì‹œì§€
            const warningBox = document.getElementById('warningBox');
            if (warningText) {
                warningBox.style.display = 'block';
                document.getElementById('warningText').textContent = warningText;
            } else {
                warningBox.style.display = 'none';
            }

            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function resetCalculator() {
            document.getElementById('price').value = '';
            document.querySelector('input[name="acquisitionType"][value="sale"]').checked = true;
            document.querySelector('input[name="propertyType"][value="house"]').checked = true;
            document.querySelector('input[name="area"][value="85"]').checked = true;
            document.querySelector('input[name="housingCount"][value="0"]').checked = true;
            document.querySelector('input[name="buyerType"][value="individual"]').checked = true;
            document.querySelector('input[name="firstBuy"][value="no"]').checked = true;
            document.querySelector('input[name="newSupply"][value="no"]').checked = true;
            document.querySelector('input[name="location"][value="regulated"]').checked = true;
            document.getElementById('resultSection').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function shareResult() {
            const totalTax = document.getElementById('totalTax').textContent;
            const text = `ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°ì—ì„œ ì·¨ë“ì„¸ë¥¼ ê³„ì‚°í–ˆì–´ìš”!\nì´ ì·¨ë“ì„¸: ${totalTax}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ì·¨ë“ì„¸ ê³„ì‚° ê²°ê³¼',
                    text: text
                });
            } else {
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                navigator.clipboard.writeText(text);
            }
        }
    </script>
</body>
</html>
