<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„ëŒ€ì‚¬ì—…ì í˜œíƒ ë¶„ì„ - ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&family=Archivo:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/calculator.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">ë¶€</div>
            <a href="/" style="text-decoration: none; color: inherit;">ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°</a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding-top: 32px; padding-bottom: 80px;">
        <a href="/rent" class="back-button">
            â† ì§‘ì„ ë¹Œë ¤ì£¼ë ¤ê³  í•´ìš”
        </a>

        <div class="calculator-header">
            <div class="calculator-icon-large">ğŸ“‹</div>
            <h1 class="calculator-title">ì„ëŒ€ì‚¬ì—…ì í˜œíƒ ë¶„ì„</h1>
            <p class="calculator-subtitle">ì„ëŒ€ì‚¬ì—…ì ë“±ë¡ ì‹œ ì„¸ì œ í˜œíƒì„ ë¶„ì„í•©ë‹ˆë‹¤</p>
        </div>

        <!-- ì„ëŒ€ì‚¬ì—…ì ì•ˆë‚´ -->
        <div class="info-box">
            <div class="info-title">
                ğŸ’¡ ì„ëŒ€ì‚¬ì—…ì ë“±ë¡ì´ë€?
            </div>
            <div class="info-content">
                ì£¼íƒì„ ì„ëŒ€í•˜ëŠ” ì‚¬ëŒì´ ì§€ë°©ìì¹˜ë‹¨ì²´ì— ì„ëŒ€ì‚¬ì—…ìë¡œ ë“±ë¡í•˜ì—¬ ì„¸ì œ í˜œíƒì„ ë°›ëŠ” ì œë„ì…ë‹ˆë‹¤.
                <br><br>
                <strong>ì£¼ìš” í˜œíƒ</strong><br>
                â€¢ <strong>ì·¨ë“ì„¸ ê°ë©´</strong>: ì¼ë°˜ ëŒ€ë¹„ ìµœëŒ€ 85% ê°ë©´<br>
                â€¢ <strong>ì¬ì‚°ì„¸ ê°ë©´</strong>: ìµœëŒ€ 75% ê°ë©´<br>
                â€¢ <strong>ì¢…ë¶€ì„¸ í•©ì‚°ë°°ì œ</strong>: ì¼ì • ìš”ê±´ ì¶©ì¡± ì‹œ<br>
                â€¢ <strong>ì–‘ë„ì„¸ ê°ë©´</strong>: ì¥ê¸°ì„ëŒ€ ì‹œ ì¤‘ê³¼ë°°ì œ + ê³µì œ<br>
                <br>
                <strong>ì£¼ì˜ì‚¬í•­</strong><br>
                â€¢ ì˜ë¬´ì„ëŒ€ê¸°ê°„ ì¤€ìˆ˜ (4ë…„ or 8ë…„)<br>
                â€¢ ì„ëŒ€ë£Œ ì¦ì•¡ ì œí•œ (ì—° 5%)<br>
                â€¢ ì¤‘ë„ í•´ì§€ ì‹œ ê°ë©´ì„¸ì•¡ ì¶”ì§•
            </div>
        </div>

        <!-- ê³„ì‚° ì…ë ¥ í¼ -->
        <div class="calc-section">
            <h2 class="calc-section-title">ì£¼íƒ ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ì£¼íƒ ì·¨ë“ê°€</label>
                <div class="input-wrapper">
                    <input type="text" id="acquisitionPrice" class="input-field" placeholder="ì˜ˆ: 400000000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì£¼íƒ êµ¬ë§¤ ê°€ê²©</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì£¼íƒ ê³µì‹œê°€ê²©</label>
                <div class="input-wrapper">
                    <input type="text" id="publicPrice" class="input-field" placeholder="ì˜ˆ: 350000000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì¬ì‚°ì„¸, ì¢…ë¶€ì„¸ ê³„ì‚° ê¸°ì¤€</div>
            </div>

            <div class="input-group">
                <label class="input-label">ì£¼íƒ ìœ í˜•</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="houseType" value="apartment" checked>
                        <span class="radio-label">ì•„íŒŒíŠ¸</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="houseType" value="officetel">
                        <span class="radio-label">ì˜¤í”¼ìŠ¤í…”</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="houseType" value="detached">
                        <span class="radio-label">ë‹¨ë…/ë‹¤ê°€êµ¬</span>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ì£¼íƒ ë©´ì </label>
                <div class="input-wrapper">
                    <input type="text" id="area" class="input-field" placeholder="85" inputmode="numeric">
                    <span class="input-suffix">ã¡</span>
                </div>
                <div class="input-helper">ì „ìš©ë©´ì  (ê³µê¸‰ë©´ì  ì•„ë‹˜)</div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ì„ëŒ€ ì¡°ê±´</h2>
            
            <div class="input-group">
                <label class="input-label">ì„ëŒ€ ìœ í˜•</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="rentalType" value="longTerm" checked>
                        <span class="radio-label">ì¥ê¸°ì„ëŒ€ (8ë…„)</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="rentalType" value="midTerm">
                        <span class="radio-label">ë‹¨ê¸°ì„ëŒ€ (4ë…„)</span>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ì›”ì„¸ (ì˜ˆì •)</label>
                <div class="input-wrapper">
                    <input type="text" id="monthlyRent" class="input-field" placeholder="ì˜ˆ: 1000000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
                <div class="input-helper">ì›” ì„ëŒ€ë£Œ</div>
            </div>

            <div class="input-group">
                <label class="input-label">ë³´ì¦ê¸ˆ (ì˜ˆì •)</label>
                <div class="input-wrapper">
                    <input type="text" id="deposit" class="input-field" placeholder="ì˜ˆ: 50000000" inputmode="numeric">
                    <span class="input-suffix">ì›</span>
                </div>
            </div>
        </div>

        <div class="calc-section">
            <h2 class="calc-section-title">ê¸°íƒ€ ì •ë³´</h2>
            
            <div class="input-group">
                <label class="input-label">ì†Œì¬ì§€</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="location" value="regulated" checked>
                        <span class="radio-label">ì¡°ì •ëŒ€ìƒì§€ì—­</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="location" value="general">
                        <span class="radio-label">ì¼ë°˜ì§€ì—­</span>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ë³´ìœ  ì£¼íƒ ìˆ˜ (ì·¨ë“ í›„)</label>
                <div class="radio-group">
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="1" checked>
                        <span class="radio-label">1ì£¼íƒ</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="2">
                        <span class="radio-label">2ì£¼íƒ</span>
                    </label>
                    <label class="radio-item">
                        <input type="radio" name="housingCount" value="3">
                        <span class="radio-label">3ì£¼íƒ ì´ìƒ</span>
                    </label>
                </div>
            </div>

            <button class="calc-button" id="calculateButton">
                ì„ëŒ€ì‚¬ì—…ì í˜œíƒ ë¶„ì„í•˜ê¸°
            </button>
        </div>

        <!-- ê²°ê³¼ ì˜ì—­ -->
        <div id="resultSection" class="result-section" style="display: none;">
            <h2 class="result-title">ğŸ“‹ ë¶„ì„ ê²°ê³¼</h2>
            
            <div class="result-card total">
                <div class="result-label">ì´ ì ˆì„¸ íš¨ê³¼ (8ë…„)</div>
                <div class="result-value" id="totalBenefit">0ì›</div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ì·¨ë“ì„¸ ë¹„êµ</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì¼ë°˜ ì·¨ë“ì„¸</span>
                    <span class="breakdown-value" id="normalAcquisitionTax">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì„ëŒ€ì‚¬ì—…ì ì·¨ë“ì„¸</span>
                    <span class="breakdown-value" id="rentalAcquisitionTax">0ì›</span>
                </div>
                <div class="breakdown-item" style="background: rgba(0, 217, 181, 0.1); padding: 12px; border-radius: 8px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 700; color: var(--secondary);">ì·¨ë“ì„¸ ì ˆê°</span>
                    <span class="breakdown-value" style="font-weight: 700; color: var(--secondary);" id="acquisitionTaxSaving">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ì¬ì‚°ì„¸ ë¹„êµ (ì—°ê°„)</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì¼ë°˜ ì¬ì‚°ì„¸</span>
                    <span class="breakdown-value" id="normalPropertyTax">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì„ëŒ€ì‚¬ì—…ì ì¬ì‚°ì„¸</span>
                    <span class="breakdown-value" id="rentalPropertyTax">0ì›</span>
                </div>
                <div class="breakdown-item" style="background: rgba(0, 217, 181, 0.1); padding: 12px; border-radius: 8px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 700; color: var(--secondary);">ì—°ê°„ ì¬ì‚°ì„¸ ì ˆê°</span>
                    <span class="breakdown-value" style="font-weight: 700; color: var(--secondary);" id="propertyTaxSaving">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">8ë…„ê°„ ì´ í˜œíƒ</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì·¨ë“ì„¸ ì ˆê° (1íšŒ)</span>
                    <span class="breakdown-value" id="totalAcquisitionSaving">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì¬ì‚°ì„¸ ì ˆê° (8ë…„)</span>
                    <span class="breakdown-value" id="totalPropertySaving">0ì›</span>
                </div>
                <div class="breakdown-item" style="background: rgba(0, 102, 255, 0.05); padding: 12px; border-radius: 8px; margin-top: 8px;">
                    <span class="breakdown-label" style="font-weight: 700;">ì´ ì ˆì„¸ì•¡</span>
                    <span class="breakdown-value" style="font-weight: 700; color: var(--primary);" id="displayTotalBenefit">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ì„ëŒ€ì†Œë“ì„¸ ë¶„ì„</h3>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì—°ê°„ ì„ëŒ€ìˆ˜ì…</span>
                    <span class="breakdown-value" id="annualRentalIncome">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">í•„ìš”ê²½ë¹„ ê³µì œ (50%)</span>
                    <span class="breakdown-value" id="necessaryExpense">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ê³¼ì„¸ ëŒ€ìƒ ì†Œë“</span>
                    <span class="breakdown-value" id="taxableIncome">0ì›</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">ì˜ˆìƒ ì„ëŒ€ì†Œë“ì„¸ (ì—°)</span>
                    <span class="breakdown-value" id="rentalIncomeTax">0ì›</span>
                </div>
            </div>

            <div class="result-breakdown">
                <h3 class="breakdown-title">ë“±ë¡ ì¡°ê±´ ì¶©ì¡± ì—¬ë¶€</h3>
                <div class="breakdown-item" id="areaRequirement">
                    <span class="breakdown-label">ë©´ì  ìš”ê±´ (85ã¡ ì´í•˜)</span>
                    <span class="breakdown-value" id="areaResult">-</span>
                </div>
                <div class="breakdown-item" id="priceRequirement">
                    <span class="breakdown-label">ê°€ê²© ìš”ê±´ (6ì–µ ì´í•˜)</span>
                    <span class="breakdown-value" id="priceResult">-</span>
                </div>
                <div class="breakdown-item" id="locationRequirement">
                    <span class="breakdown-label">ì§€ì—­ ìš”ê±´</span>
                    <span class="breakdown-value" id="locationResult">-</span>
                </div>
            </div>

            <div class="result-info">
                <div class="info-icon">â„¹ï¸</div>
                <div class="info-text" id="resultInfo"></div>
            </div>

            <div class="result-info" style="background: rgba(255, 87, 51, 0.05); border-color: rgba(255, 87, 51, 0.2);">
                <div class="info-icon">âš ï¸</div>
                <div class="info-text">
                    <strong>ì˜ë¬´ì‚¬í•­ (ë°˜ë“œì‹œ ì¤€ìˆ˜)</strong><br>
                    â€¢ ì˜ë¬´ì„ëŒ€ê¸°ê°„: ë‹¨ê¸° 4ë…„, ì¥ê¸° 8ë…„<br>
                    â€¢ ì„ëŒ€ë£Œ ì¦ì•¡ ì œí•œ: ì—° 5% ì´ë‚´<br>
                    â€¢ ì„ì°¨ì¸ ë³€ê²½ ì‹œ ì¬ì‹ ê³  í•„ìš”<br>
                    â€¢ ì¤‘ë„ í•´ì§€ ì‹œ ê°ë©´ì„¸ì•¡ + ì´ì ì¶”ì§•<br>
                    â€¢ ì„ëŒ€ë£Œ ì‹ ê³ : ë§¤ë…„ ì„ëŒ€ì°¨ê³„ì•½ ì‹ ê³ 
                </div>
            </div>

            <div class="result-info" style="background: rgba(0, 217, 181, 0.05); border-color: rgba(0, 217, 181, 0.2);">
                <div class="info-icon">ğŸ’¡</div>
                <div class="info-text">
                    <strong>ì„ëŒ€ì‚¬ì—…ì ë“±ë¡ ì¶”ì²œ ëŒ€ìƒ</strong><br>
                    â€¢ ì¥ê¸° ì„ëŒ€ ì˜ˆì •ì (8ë…„ ì´ìƒ)<br>
                    â€¢ 85ã¡ ì´í•˜ ì£¼íƒ ë³´ìœ ì<br>
                    â€¢ ë‹¤ì£¼íƒì (ì„¸ì œ í˜œíƒ í¼)<br>
                    â€¢ ì•ˆì •ì ì¸ ì„ëŒ€ìˆ˜ìµ ì›í•˜ëŠ” ê²½ìš°<br>
                    <br>
                    <strong>ë“±ë¡ ë¹„ì¶”ì²œ ëŒ€ìƒ</strong><br>
                    â€¢ ë‹¨ê¸° ë§¤ë§¤ ì˜ˆì •ì<br>
                    â€¢ ì„ëŒ€ë£Œ ì¸ìƒ í•„ìš”ì„± ë†’ì€ ê²½ìš°<br>
                    â€¢ ì˜ë¬´ ê¸°ê°„ ì¤€ìˆ˜ ì–´ë ¤ìš´ ê²½ìš°
                </div>
            </div>

            <div class="result-actions">
                <button class="action-button secondary" id="resetButton">
                    ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°
                </button>
                <button class="action-button primary" id="shareButton">
                    ê²°ê³¼ ê³µìœ í•˜ê¸°
                </button>
            </div>
        </div>
    </main>

    <script>
        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            const calculateButton = document.getElementById('calculateButton');
            if (calculateButton) {
                calculateButton.addEventListener('click', calculateBenefits);
            }

            const resetButton = document.getElementById('resetButton');
            if (resetButton) {
                resetButton.addEventListener('click', resetCalculator);
            }

            const shareButton = document.getElementById('shareButton');
            if (shareButton) {
                shareButton.addEventListener('click', shareResult);
            }

            // ìˆ«ì ì…ë ¥ í•„ë“œ
            ['acquisitionPrice', 'publicPrice', 'area', 'monthlyRent', 'deposit'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/[^0-9.]/g, '');
                        e.target.value = value;
                    });
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') calculateBenefits();
                    });
                }
            });
        });

        function formatNumber(num) {
            return new Intl.NumberFormat('ko-KR').format(Math.floor(num));
        }

        function formatCurrency(num) {
            return formatNumber(num) + 'ì›';
        }

        function formatKoreanCurrency(num) {
            const billion = Math.floor(num / 100000000);
            const tenThousand = Math.floor((num % 100000000) / 10000);
            const remainder = num % 10000;
            
            let result = '';
            if (billion > 0) result += billion + 'ì–µ ';
            if (tenThousand > 0) result += formatNumber(tenThousand) + 'ë§Œ ';
            if (remainder > 0 && billion === 0) result += formatNumber(remainder);
            
            return result.trim() + 'ì›';
        }

        function calculateBenefits() {
            const acquisitionPrice = parseInt(document.getElementById('acquisitionPrice').value) || 0;
            const publicPrice = parseInt(document.getElementById('publicPrice').value) || 0;
            const area = parseFloat(document.getElementById('area').value) || 0;
            const monthlyRent = parseInt(document.getElementById('monthlyRent').value) || 0;
            const deposit = parseInt(document.getElementById('deposit').value) || 0;
            const houseType = document.querySelector('input[name="houseType"]:checked').value;
            const rentalType = document.querySelector('input[name="rentalType"]:checked').value;
            const location = document.querySelector('input[name="location"]:checked').value;
            const housingCount = parseInt(document.querySelector('input[name="housingCount"]:checked').value);

            if (acquisitionPrice === 0 || publicPrice === 0) {
                alert('ì£¼íƒ ì·¨ë“ê°€ì™€ ê³µì‹œê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ë“±ë¡ ìš”ê±´ ì²´í¬
            const areaOk = area <= 85;
            const priceOk = acquisitionPrice <= 600000000;
            const locationOk = true; // ëŒ€ë¶€ë¶„ ì§€ì—­ ê°€ëŠ¥

            // 1. ì·¨ë“ì„¸ ê³„ì‚°
            let normalAcquisitionTaxRate = 0;
            let rentalAcquisitionTaxRate = 0;

            if (housingCount === 1) {
                if (acquisitionPrice <= 600000000) normalAcquisitionTaxRate = 0.01;
                else if (acquisitionPrice <= 900000000) normalAcquisitionTaxRate = 0.02;
                else normalAcquisitionTaxRate = 0.03;
            } else if (housingCount === 2) {
                if (location === 'regulated') normalAcquisitionTaxRate = 0.08;
                else normalAcquisitionTaxRate = 0.04;
            } else {
                if (location === 'regulated') normalAcquisitionTaxRate = 0.12;
                else normalAcquisitionTaxRate = 0.04;
            }

            // ì„ëŒ€ì‚¬ì—…ì ì·¨ë“ì„¸ (85% ê°ë©´)
            rentalAcquisitionTaxRate = normalAcquisitionTaxRate * 0.15;

            const normalAcquisitionTax = acquisitionPrice * normalAcquisitionTaxRate;
            const rentalAcquisitionTax = acquisitionPrice * rentalAcquisitionTaxRate;
            const acquisitionTaxSaving = normalAcquisitionTax - rentalAcquisitionTax;

            // 2. ì¬ì‚°ì„¸ ê³„ì‚°
            let normalPropertyTaxRate = 0.001; // ì£¼íƒ ê¸°ë³¸
            const rentalPropertyTaxRate = normalPropertyTaxRate * 0.25; // 75% ê°ë©´

            const normalPropertyTax = publicPrice * normalPropertyTaxRate;
            const rentalPropertyTax = publicPrice * rentalPropertyTaxRate;
            const propertyTaxSaving = normalPropertyTax - rentalPropertyTax;

            // 3. 8ë…„ê°„ ì´ í˜œíƒ
            const years = rentalType === 'longTerm' ? 8 : 4;
            const totalAcquisitionSaving = acquisitionTaxSaving;
            const totalPropertySaving = propertyTaxSaving * years;
            const totalBenefit = totalAcquisitionSaving + totalPropertySaving;

            // 4. ì„ëŒ€ì†Œë“ì„¸
            const annualRentalIncome = monthlyRent * 12;
            const necessaryExpense = annualRentalIncome * 0.5; // í•„ìš”ê²½ë¹„ 50%
            const taxableIncome = annualRentalIncome - necessaryExpense;
            let rentalIncomeTax = 0;
            
            if (taxableIncome > 0) {
                // ê°„ì´ì„¸ì•¡: 14% (ì§€ë°©ì†Œë“ì„¸ í¬í•¨ 15.4%)
                rentalIncomeTax = taxableIncome * 0.154;
            }

            // ê²°ê³¼ ë©”ì‹œì§€
            let resultInfo = '';
            if (areaOk && priceOk) {
                resultInfo = `ì„ëŒ€ì‚¬ì—…ì ë“±ë¡ ìš”ê±´ì„ ì¶©ì¡±í•©ë‹ˆë‹¤. ${years}ë…„ê°„ ì•½ ${formatKoreanCurrency(totalBenefit)}ì˜ ì„¸ê¸ˆì„ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `;
                if (totalBenefit > 10000000) {
                    resultInfo += 'ë“±ë¡ì„ ì ê·¹ ê¶Œì¥í•©ë‹ˆë‹¤.';
                } else if (totalBenefit > 5000000) {
                    resultInfo += 'ë“±ë¡ì„ ê³ ë ¤í•´ë³¼ ë§Œí•©ë‹ˆë‹¤.';
                } else {
                    resultInfo += 'í˜œíƒì´ í¬ì§€ ì•Šìœ¼ë¯€ë¡œ ì‹ ì¤‘íˆ ê²°ì •í•˜ì„¸ìš”.';
                }
            } else {
                resultInfo = 'ì„ëŒ€ì‚¬ì—…ì ë“±ë¡ ìš”ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ';
                if (!areaOk) resultInfo += 'ë©´ì ì´ 85ã¡ë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤. ';
                if (!priceOk) resultInfo += 'ì·¨ë“ê°€ê°€ 6ì–µì›ì„ ì´ˆê³¼í•©ë‹ˆë‹¤. ';
            }

            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('totalBenefit').textContent = formatKoreanCurrency(totalBenefit);
            
            document.getElementById('normalAcquisitionTax').textContent = formatCurrency(normalAcquisitionTax);
            document.getElementById('rentalAcquisitionTax').textContent = formatCurrency(rentalAcquisitionTax);
            document.getElementById('acquisitionTaxSaving').textContent = formatCurrency(acquisitionTaxSaving);
            
            document.getElementById('normalPropertyTax').textContent = formatCurrency(normalPropertyTax);
            document.getElementById('rentalPropertyTax').textContent = formatCurrency(rentalPropertyTax);
            document.getElementById('propertyTaxSaving').textContent = formatCurrency(propertyTaxSaving);
            
            document.getElementById('totalAcquisitionSaving').textContent = formatCurrency(totalAcquisitionSaving);
            document.getElementById('totalPropertySaving').textContent = formatCurrency(totalPropertySaving);
            document.getElementById('displayTotalBenefit').textContent = formatCurrency(totalBenefit);
            
            document.getElementById('annualRentalIncome').textContent = formatCurrency(annualRentalIncome);
            document.getElementById('necessaryExpense').textContent = formatCurrency(necessaryExpense);
            document.getElementById('taxableIncome').textContent = formatCurrency(taxableIncome);
            document.getElementById('rentalIncomeTax').textContent = formatCurrency(rentalIncomeTax);
            
            // ìš”ê±´ ì¶©ì¡± ì—¬ë¶€
            document.getElementById('areaResult').textContent = areaOk ? 'âœ“ ì¶©ì¡±' : 'âœ— ë¯¸ì¶©ì¡±';
            document.getElementById('areaResult').style.color = areaOk ? 'var(--secondary)' : '#FF5733';
            document.getElementById('priceResult').textContent = priceOk ? 'âœ“ ì¶©ì¡±' : 'âœ— ë¯¸ì¶©ì¡±';
            document.getElementById('priceResult').style.color = priceOk ? 'var(--secondary)' : '#FF5733';
            document.getElementById('locationResult').textContent = locationOk ? 'âœ“ ì¶©ì¡±' : 'âœ— ë¯¸ì¶©ì¡±';
            document.getElementById('locationResult').style.color = locationOk ? 'var(--secondary)' : '#FF5733';
            
            document.getElementById('resultInfo').textContent = resultInfo;

            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function resetCalculator() {
            document.getElementById('acquisitionPrice').value = '';
            document.getElementById('publicPrice').value = '';
            document.getElementById('area').value = '';
            document.getElementById('monthlyRent').value = '';
            document.getElementById('deposit').value = '';
            document.querySelector('input[name="houseType"][value="apartment"]').checked = true;
            document.querySelector('input[name="rentalType"][value="longTerm"]').checked = true;
            document.querySelector('input[name="location"][value="regulated"]').checked = true;
            document.querySelector('input[name="housingCount"][value="1"]').checked = true;
            document.getElementById('resultSection').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function shareResult() {
            const totalBenefit = document.getElementById('totalBenefit').textContent;
            const text = `ë¶€ë™ì‚°ê³„ì‚°í•˜ê¸°ì—ì„œ ì„ëŒ€ì‚¬ì—…ì í˜œíƒì„ ë¶„ì„í–ˆì–´ìš”!\nì´ ì ˆì„¸ íš¨ê³¼: ${totalBenefit}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ì„ëŒ€ì‚¬ì—…ì í˜œíƒ ë¶„ì„ ê²°ê³¼',
                    text: text
                });
            } else {
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                navigator.clipboard.writeText(text);
            }
        }
    </script>
</body>
</html>
